<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Num√©rologie Strat√©gique Compl√®te</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- === SECTION CSS === -->
    <style>
        :root {
            --primary-color: #3a0ca3; --secondary-color: #7209b7; --background-color: #f5f3f4;
            --text-color: #212529; --card-bg: #ffffff; --border-radius: 12px;
            --box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08); --summary-border: #4361ee;
            --ai-btn-bg: #0077b6; --ai-btn-hover: #023e8a;
        }
        body.dark-mode {
            --primary-color: #9d4edd; --secondary-color: #c77dff; --background-color: #121212;
            --text-color: #e0e0e0; --card-bg: #1e1e1e;
            --box-shadow: 0 6px 20px rgba(255, 255, 255, 0.05); --summary-border: #80ffdb;
            --ai-btn-bg: #48cae4; --ai-btn-hover: #00b4d8;
        }
        body {
            font-family: 'Poppins', sans-serif; background-color: var(--background-color); color: var(--text-color);
            margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh; transition: background-color 0.3s, color 0.3s;
        }
        .container { max-width: 800px; width: 100%; }
        header { text-align: center; margin-bottom: 20px; color: var(--primary-color); position: relative; }
        header h1 { font-family: 'Lora', serif; font-size: 2.8em; font-weight: 600; }
        .theme-switch-wrapper { display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 15px; }
        .theme-switch { display: inline-block; height: 24px; position: relative; width: 50px; }
        .theme-switch input { display: none; }
        .slider { background-color: #ccc; bottom: 0; left: 0; right: 0; top: 0; position: absolute; cursor: pointer; transition: .4s; border-radius: 24px; }
        .slider:before { background-color: white; bottom: 4px; left: 4px; content: ""; height: 16px; width: 16px; position: absolute; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--secondary-color); }
        input:checked + .slider:before { transform: translateX(26px); }
        main { background: var(--card-bg); padding: 30px 40px; border-radius: var(--border-radius); box-shadow: var(--box-shadow); transition: background-color 0.3s; }
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--primary-color); }
        .input-group input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: var(--border-radius); font-size: 1em; font-family: 'Poppins', sans-serif; box-sizing: border-box; background-color: var(--card-bg); color: var(--text-color); transition: border-color 0.3s, box-shadow 0.3s; }
        .input-group input:focus { outline: none; border-color: var(--secondary-color); box-shadow: 0 0 0 3px rgba(114, 9, 183, 0.2); }
        button { width: 100%; padding: 15px; background: linear-gradient(45deg, var(--secondary-color), var(--primary-color)); color: white; border: none; border-radius: var(--border-radius); font-size: 1.2em; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        button:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(58, 12, 163, 0.4); }
        button:disabled { background: #999; cursor: not-allowed; }
        #results-wrapper { margin-top: 40px; opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out; }
        #results-wrapper:not(.hidden) { opacity: 1; transform: translateY(0); }
        .result-card, .summary-card { background-color: var(--card-bg); padding: 25px; margin-bottom: 25px; border-radius: var(--border-radius); border-left: 6px solid var(--secondary-color); box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: background-color 0.3s, border-color 0.3s; }
        .summary-card { border-left-color: var(--summary-border); background-color: color-mix(in srgb, var(--card-bg) 95%, var(--summary-border) 5%); }
        .result-card h2, .summary-card h2 { margin-top: 0; margin-bottom: 15px; color: var(--primary-color); display: flex; align-items: center; font-family: 'Lora', serif; font-size: 1.8em; }
        .result-card .number-circle { flex-shrink: 0; display: inline-flex; justify-content: center; align-items: center; width: 50px; height: 50px; background-color: var(--secondary-color); color: white; border-radius: 50%; font-size: 1.6em; font-weight: 600; margin-right: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .result-card p, .summary-card p { line-height: 1.7; margin-bottom: 10px; }
        .result-card .description, .summary-card .description { font-style: italic; color: #555; margin-bottom: 15px; font-family: 'Lora', serif; }
        body.dark-mode .result-card .description, body.dark-mode .summary-card .description { color: #aaa; }
        details { margin-top: 20px; }
        summary { cursor: pointer; font-weight: 600; color: var(--primary-color); display: inline-block; padding: 5px 0; }
        .calculation-details { font-size: 0.9em; color: #444; background: color-mix(in srgb, var(--background-color) 80%, #000 20%); padding: 10px 15px; border-radius: var(--border-radius); margin-top: 8px; line-height: 1.6; border: 1px solid color-mix(in srgb, var(--background-color) 50%, #000 50%); }
        body.dark-mode .calculation-details { color: #ddd; background: #2c2c2c; border-color: #444; }
        .action-buttons { display: flex; gap: 15px; margin-top: 20px; }
        #print-btn { background: #6c757d; }
        #ai-export-btn { background: var(--ai-btn-bg); }
        #ai-export-btn:hover { background: var(--ai-btn-hover); box-shadow: 0 8px 25px rgba(0, 119, 182, 0.4); }
        .hidden { display: none; }
        footer { text-align: center; margin-top: 40px; font-size: 0.9em; color: #777; }
        body.dark-mode footer { color: #888; }
        @media print { body { padding: 0; margin: 20px; background-color: #fff; color: #000; } header, main > form, footer, .action-buttons, .theme-switch-wrapper { display: none; } main, .container { box-shadow: none; padding: 0; } .result-card, .summary-card { page-break-inside: avoid; box-shadow: none; border: 1px solid #ddd; background-color: #fff !important; } details { display: none; } }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>üîÆ Num√©rologie Strat√©gique</h1>
            <p>D√©couvrez les √©nergies qui fa√ßonnent votre vie.</p>
            <div class="theme-switch-wrapper">
                <span>‚òÄÔ∏è</span>
                <label class="theme-switch"><input type="checkbox" id="theme-toggle"><span class="slider"></span></label>
                <span>üåô</span>
            </div>
        </header>

        <main>
            <form id="numerology-form">
                <div class="input-group">
                    <label for="full-name">Noms et Pr√©noms complets (de naissance)</label>
                    <input type="text" id="full-name" placeholder="Ex: Marie Anne Claire Dubois" required>
                </div>
                <div class="input-group">
                    <label for="birth-date">Date de naissance</label>
                    <input type="date" id="birth-date" required>
                </div>
                <button type="submit">Calculer mon Th√®me Complet</button>
            </form>

            <div id="results-wrapper" class="hidden">
                <div id="summary-container"></div>
                <div id="results-container"></div>
                <div class="action-buttons">
                    <button id="ai-export-btn" class="hidden">‚ú® Analyser avec une IA</button>
                    <button id="print-btn" class="hidden">üñ®Ô∏è Imprimer / PDF</button>
                </div>
            </div>
        </main>
        
        <footer><p>Application cr√©√©e pour la d√©couverte de soi. Ne remplace pas un conseil professionnel.</p></footer>
    </div>

    <!-- === SECTION JAVASCRIPT === -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Elements ---
            const form = document.getElementById('numerology-form');
            const resultsWrapper = document.getElementById('results-wrapper');
            const summaryContainer = document.getElementById('summary-container');
            const resultsContainer = document.getElementById('results-container');
            const printBtn = document.getElementById('print-btn');
            const aiExportBtn = document.getElementById('ai-export-btn');
            const themeToggle = document.getElementById('theme-toggle');

            // --- Theme Switcher Logic ---
            themeToggle.addEventListener('change', () => {
                document.body.classList.toggle('dark-mode');
                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
            });
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.checked = true;
            }

            // --- Numerology Data ---
            const letterValues = { 'A':1,'J':1,'S':1, 'B':2,'K':2,'T':2, 'C':3,'L':3,'U':3, 'D':4,'M':4,'V':4, 'E':5,'N':5,'W':5, 'F':6,'O':6,'X':6, 'G':7,'P':7,'Y':7, 'H':8,'Q':8,'Z':8, 'I':9,'R':9 };
            const vowels = ['A', 'E', 'I', 'O', 'U', 'Y'];
            const interpretations = { /* Les interpr√©tations compl√®tes sont ici */
                cheminDeVie: { 1: "<strong>Le Leader :</strong> Votre mission est d'apprendre l'ind√©pendance, l'innovation et le leadership.", 2: "<strong>Le Diplomate :</strong> Votre chemin est celui de la coop√©ration, de la diplomatie et de l'harmonie.", 3: "<strong>Le Communicant :</strong> Vous √™tes sur un chemin de cr√©ativit√©, d'expression et de joie de vivre.", 4: "<strong>Le B√¢tisseur :</strong> Votre mission est de construire, d'organiser et d'apporter de la stabilit√©.", 5: "<strong>L'Aventurier :</strong> Votre chemin est celui du changement, de la libert√© et de l'aventure.", 6: "<strong>Le Responsable :</strong> Votre mission est li√©e √† l'amour, la responsabilit√© et le service aux autres.", 7: "<strong>Le Sage :</strong> Votre chemin est une qu√™te de connaissance, de v√©rit√© et de spiritualit√©.", 8: "<strong>Le Puissant :</strong> Votre mission est d'apprendre la ma√Ætrise du monde mat√©riel, le pouvoir et l'abondance.", 9: "<strong>L'Humaniste :</strong> Votre chemin est celui de l'altruisme, de la compassion et de la vision universelle.", 11: "<strong>L'Inspir√© (Ma√Ætre Nombre) :</strong> C'est le chemin du 2 √† une haute vibration. Votre mission est d'√™tre un canal d'inspiration et de r√©v√©lation.", 22: "<strong>Le Grand B√¢tisseur (Ma√Ætre Nombre) :</strong> C'est le chemin du 4 √† une tr√®s haute vibration. Votre mission est de transformer des r√™ves ambitieux en r√©alisations concr√®tes.", 33: "<strong>Le Guide Spirituel (Ma√Ætre Nombre) :</strong> Extr√™mement rare, c'est le chemin du 6 √† sa plus haute expression. Votre mission est le service d√©sint√©ress√© et la compassion universelle." },
                expression: { 1: "<strong>Le Pionnier :</strong> Vos talents naturels r√©sident dans la capacit√© √† initier et diriger.", 2: "<strong>Le Partenaire :</strong> Vous poss√©dez des dons pour la collaboration et la m√©diation.", 3: "<strong>L'Artiste Cr√©atif :</strong> Votre potentiel s'exprime √† travers la communication et la cr√©ativit√©.", 4: "<strong>L'Organisateur :</strong> Vous avez un talent inn√© pour l'organisation et le travail m√©ticuleux.", 5: "<strong>Le Communicateur Charismatique :</strong> Vos talents sont la polyvalence et l'adaptabilit√©.", 6: "<strong>Le Conseiller Protecteur :</strong> Vous avez un don pour le conseil et la prise en charge des autres.", 7: "<strong>Le Chercheur de V√©rit√© :</strong> Vos talents sont l'analyse, la recherche et l'intuition.", 8: "<strong>Le Manager Ambitieux :</strong> Vous poss√©dez un potentiel pour les affaires et le management.", 9: "<strong>Le Grand Humaniste :</strong> Vos talents sont la compassion et une vision large du monde.", 11: "<strong>Le Visionnaire Intuitif :</strong> Vous avez le potentiel d'un leader charismatique et inspirant.", 22: "<strong>Le Ma√Ætre B√¢tisseur :</strong> Vous avez le potentiel de r√©aliser des projets d'une envergure exceptionnelle.", 33: "<strong>Le Ma√Ætre Enseignant :</strong> Votre potentiel est celui d'un guide spirituel et d'un gu√©risseur." },
                ame: { 1: "<strong>D√©sir d'Ind√©pendance :</strong> Vous aspirez √† √™tre le num√©ro un et √† diriger votre vie.", 2: "<strong>D√©sir d'Harmonie :</strong> Votre √¢me recherche l'amour, la paix et l'union.", 3: "<strong>D√©sir d'Expression :</strong> Vous avez un besoin vital de cr√©er et de communiquer.", 4: "<strong>D√©sir de Stabilit√© :</strong> Votre motivation est la qu√™te de s√©curit√© et de structure.", 5: "<strong>D√©sir de Libert√© :</strong> Votre √¢me a soif de changement et de nouvelles exp√©riences.", 6: "<strong>D√©sir de Service :</strong> Vous √™tes anim√© par un besoin de prendre soin des autres.", 7: "<strong>D√©sir de Connaissance :</strong> Votre √¢me est celle d'un chercheur.", 8: "<strong>D√©sir de Ma√Ætrise :</strong> Vous aspirez au succ√®s et √† la ma√Ætrise du monde mat√©riel.", 9: "<strong>D√©sir d'Universalit√© :</strong> Votre √¢me est tourn√©e vers l'humanit√© et les grandes causes.", 11: "<strong>D√©sir de R√©v√©lation :</strong> Votre √¢me aspire √† une connexion spirituelle intense.", 22: "<strong>D√©sir de B√¢tir pour l'Humanit√© :</strong> Vous d√©sirez construire quelque chose de monumental.", 33: "<strong>D√©sir d'Amour Inconditionnel :</strong> Votre d√©sir est de gu√©rir le monde par la compassion." },
                personnalite: { 1: "<strong>L'Image du Chef :</strong> On vous per√ßoit comme confiant et d√©termin√©.", 2: "<strong>L'Image du Diplomate :</strong> On vous voit comme charmant et coop√©ratif.", 3: "<strong>L'Image de l'Artiste Sociable :</strong> On vous per√ßoit comme p√©tillant et optimiste.", 4: "<strong>L'Image du Pilier Fiable :</strong> Vous projetez une image de s√©rieux et de stabilit√©.", 5: "<strong>L'Image de l'Aventurier Charismatique :</strong> On vous per√ßoit comme magn√©tique et adaptable.", 6: "<strong>L'Image du Parent Universel :</strong> On vous voit comme chaleureux et responsable.", 7: "<strong>L'Image du Sage Myst√©rieux :</strong> On vous per√ßoit comme intelligent et r√©serv√©.", 8: "<strong>L'Image de la Puissance :</strong> Vous projetez une image de force et d'ambition.", 9: "<strong>L'Image de l'Humaniste Sage :</strong> On vous per√ßoit comme tol√©rant et g√©n√©reux.", 11: "<strong>L'Image de l'Intuitif Inspir√© :</strong> On vous voit comme √©lectrique et visionnaire.", 22: "<strong>L'Image du B√¢tisseur de Confiance :</strong> Vous projetez une image de comp√©tence exceptionnelle.", 33: "<strong>L'Image du Guide Bienveillant :</strong> On vous per√ßoit comme une source d'amour et de compassion." },
                nombreActif: { 1: "<strong>Action Directe :</strong> Vous agissez de mani√®re directe et ind√©pendante.", 2: "<strong>Action Collaborative :</strong> Vous agissez de pr√©f√©rence en collaboration.", 3: "<strong>Action Cr√©ative :</strong> Votre mani√®re d'agir est joyeuse et expressive.", 4: "<strong>Action M√©thodique :</strong> Vous agissez de fa√ßon planifi√©e et pers√©v√©rante.", 5: "<strong>Action Adaptable :</strong> Vous agissez de mani√®re rapide et flexible.", 6: "<strong>Action Responsable :</strong> Vos actions sont motiv√©es par le sens des responsabilit√©s.", 7: "<strong>Action R√©fl√©chie :</strong> Vous agissez apr√®s analyse et r√©flexion.", 8: "<strong>Action Ambitieuse :</strong> Votre mode d'action est puissant et orient√© objectif.", 9: "<strong>Action Altruiste :</strong> Vous agissez pour une cause plus grande que vous.", 11: "<strong>Action Intuitive :</strong> Vous agissez en suivant votre puissante intuition.", 22: "<strong>Action √† Grande √âchelle :</strong> Vous mettez en ≈ìuvre des projets ambitieux.", 33: "<strong>Action Compassionnelle :</strong> Vous agissez m√ª par un d√©sir de gu√©rir et de servir." },
                anneePersonnelle: { 1: "<strong>Nouveau D√©part :</strong> Ann√©e pour planter de nouvelles graines et lancer des projets.", 2: "<strong>Patience et Coop√©ration :</strong> Le rythme ralentit, favorisant les partenariats.", 3: "<strong>Cr√©ativit√© et Sociabilit√© :</strong> L'√©nergie est √† la joie et √† l'expression.", 4: "<strong>Travail et Construction :</strong> Ann√©e pour travailler dur et s'organiser.", 5: "<strong>Changement et Libert√© :</strong> Attendez-vous √† du mouvement et des opportunit√©s.", 6: "<strong>Amour et Responsabilit√©s :</strong> Le foyer et la famille sont au premier plan.", 7: "<strong>Introspection et Spiritualit√© :</strong> Ann√©e de pause et de r√©flexion.", 8: "<strong>Ambition et Finances :</strong> L'√©nergie est focalis√©e sur la carri√®re et les finances.", 9: "<strong>Bilan et Humanisme :</strong> Fin d'un cycle, temps pour l√¢cher prise et faire le bilan." }
            };

            // --- Event Listeners ---
            form.addEventListener('submit', e => {
                e.preventDefault();
                const fullName = document.getElementById('full-name').value;
                const birthDate = document.getElementById('birth-date').value;
                if (!fullName || !birthDate) { alert("Veuillez remplir tous les champs."); return; }
                displayAllResults(fullName, birthDate);
            });

            // --- Calculation Functions ---
            function reduceNumber(n, details = []) {
                let num = parseInt(n, 10), currentDetails = String(num);
                while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
                    const digits = String(num).split('');
                    num = digits.reduce((acc, digit) => acc + parseInt(digit, 10), 0);
                    currentDetails += ` ‚ûî ${digits.join(' + ')} = ${num}`;
                }
                details.push(currentDetails);
                return { value: num, details: details.join(' ‚ûî ') };
            }
            function calculateNumberFromName(name, type) {
                const normalizedName = name.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase().replace(/[^A-Z\s]/g, '');
                let sum = 0, details = [];
                for (const char of normalizedName) {
                    if (char === ' ') continue;
                    const isVowel = vowels.includes(char);
                    if ((type === 'all') || (type === 'vowels' && isVowel) || (type === 'consonants' && !isVowel)) {
                        sum += letterValues[char] || 0;
                        details.push(`${char}(${letterValues[char] || 0})`);
                    }
                }
                return reduceNumber(sum, [`${details.join(' + ')} = ${sum}`]);
            }
            function calculateLifePath(date) {
                const [year, month, day] = date.split('-'), dayR = reduceNumber(day), monthR = reduceNumber(month), yearR = reduceNumber(year), totalSum = dayR.value + monthR.value + yearR.value;
                let details = `Jour: ${dayR.details}<br>Mois: ${monthR.details}<br>Ann√©e: ${yearR.details}<br>Total: ${dayR.value} + ${monthR.value} + ${yearR.value} = ${totalSum}`;
                const final = reduceNumber(totalSum); if (totalSum !== final.value) details += ` ‚ûî ${final.details}`;
                return { value: final.value, details };
            }
            function calculatePersonalYear(birthDate) {
                const currentYear = new Date().getFullYear(), [, month, day] = birthDate.split('-');
                const dayR = reduceNumber(day), monthR = reduceNumber(month), yearR = reduceNumber(currentYear), totalSum = dayR.value + monthR.value + yearR.value;
                let details = `Jour naiss.: ${dayR.details}<br>Mois naiss.: ${monthR.details}<br>Ann√©e cours: ${yearR.details}<br>Total: ${dayR.value} + ${monthR.value} + ${yearR.value} = ${totalSum}`;
                const final = reduceNumber(totalSum); if (totalSum !== final.value) details += ` ‚ûî ${final.details}`;
                return { value: final.value, details };
            }

            // --- Display Functions ---
            function displaySummary(lifePath, expression) {
                const lpText = interpretations.cheminDeVie[lifePath].split(':')[0].toLowerCase();
                const expText = interpretations.expression[expression].split(':')[0].toLowerCase();
                let summaryText = `Votre <strong>Chemin de Vie ${lifePath}</strong> (votre mission) vous invite √† devenir <strong>${lpText}</strong>. Pour y parvenir, vous disposez des dons de votre <strong>Nombre d'Expression ${expression}</strong> (vos outils), qui vous d√©finit comme <strong>${expText}</strong>.`;
                if (lifePath === expression || (lifePath === 11 && expression === 2) || (lifePath === 22 && expression === 4) || (lifePath === 33 && expression === 6)) {
                    summaryText += "<br><br>‚ú® <strong>Synergie Puissante :</strong> Votre mission et vos talents sont en parfaite harmonie. Votre potentiel d'accomplissement est immense.";
                } else {
                    summaryText += "<br><br>üí° <strong>Dynamique de Croissance :</strong> Vos talents et votre mission sont diff√©rents, cr√©ant une dynamique unique source de grande richesse et d'apprentissage.";
                }
                summaryContainer.innerHTML = `<div class="summary-card"><h2>Synth√®se Strat√©gique</h2><p>${summaryText}</p></div>`;
            }

            function displayAllResults(fullName, birthDate) {
                // Calculations
                const resultsMap = new Map();
                resultsMap.set('Ann√©e Personnelle', { key: 'anneePersonnelle', result: calculatePersonalYear(birthDate), description: `L'√©nergie et les opportunit√©s qui teintent votre ann√©e en cours (${new Date().getFullYear()}).` });
                resultsMap.set('Chemin de Vie', { key: 'cheminDeVie', result: calculateLifePath(birthDate), description: "Votre mission de vie, les le√ßons √† apprendre." });
                resultsMap.set('Nombre d\'Expression', { key: 'expression', result: calculateNumberFromName(fullName, 'all'), description: "Vos talents inn√©s, vos potentiels." });
                resultsMap.set('Nombre de l\'√Çme', { key: 'ame', result: calculateNumberFromName(fullName, 'vowels'), description: "Ce qui vous motive profond√©ment." });
                resultsMap.set('Nombre de Personnalit√©', { key: 'personnalite', result: calculateNumberFromName(fullName, 'consonants'), description: "L'image que vous projetez." });
                resultsMap.set('Nombre Actif', { key: 'nombreActif', result: calculateNumberFromName(fullName.split(' ')[0], 'all'), description: "Votre √©nergie d'action au quotidien." });
                
                // Display Summary
                displaySummary(resultsMap.get('Chemin de Vie').result.value, resultsMap.get('Nombre d\'Expression').result.value);

                // Display Cards
                resultsContainer.innerHTML = '';
                resultsMap.forEach((data, title) => {
                    const interpretationText = interpretations[data.key][data.result.value] || "Interpr√©tation non disponible.";
                    const card = document.createElement('div');
                    card.className = 'result-card';
                    card.innerHTML = `
                        <h2><span class="number-circle">${data.result.value}</span>${title}</h2>
                        <p class="description">${data.description}</p>
                        <p>${interpretationText}</p>
                        <details><summary>Voir le calcul</summary><div class="calculation-details">${data.result.details}</div></details>
                    `;
                    resultsContainer.appendChild(card);
                });

                // Show action buttons
                resultsWrapper.classList.remove('hidden');
                printBtn.classList.remove('hidden');
                aiExportBtn.classList.remove('hidden');
                
                // Print button logic
                printBtn.onclick = () => window.print();

                // AI Export button logic
                aiExportBtn.onclick = () => {
                    let resultsForAI = '';
                    resultsMap.forEach((data, title) => {
                        resultsForAI += `${title}: ${data.result.value}\n`;
                    });

                    const aiPrompt = `
# CONTEXTE
Je suis un utilisateur d'une application de num√©rologie et je souhaite une analyse approfondie de mon th√®me.

# MON TH√àME NUM√âROLOGIQUE
${resultsForAI}
# PROMPT POUR L'IA
Agis comme un expert en num√©rologie strat√©gique de renomm√©e mondiale. En te basant sur les donn√©es de mon th√®me ci-dessus, r√©dige une analyse compl√®te, perspicace et encourageante.

Ne te contente pas de r√©p√©ter la signification de chaque nombre. Ta v√©ritable valeur ajout√©e est de TISSER DES LIENS entre eux.

Structure ta r√©ponse comme suit :
1.  **Synth√®se G√©n√©rale :** En une phrase, quel est le grand paradoxe ou la grande mission de ma personnalit√© ?
2.  **Mes Forces Principales (Synergies) :** Identifie les 2 ou 3 associations de nombres qui fonctionnent le mieux ensemble. Explique comment je peux utiliser ces talents combin√©s pour r√©ussir. (Ex: "Votre Expression 5 coupl√©e √† votre √Çme 3 fait de vous un communicant n√©...")
3.  **Mes Axes de Croissance (D√©fis et Conflits) :** Identifie les 1 ou 2 dynamiques de nombres qui sont en tension. Explique clairement le d√©fi que cela repr√©sente et comment je peux transformer cette tension en une force. (Ex: "Le d√©fi entre votre Chemin de Vie 4 et votre Personnalit√© 5...")
4.  **Conseil Strat√©gique Personnalis√© :** En conclusion, donne-moi un conseil concret et actionnable pour aligner toutes ces √©nergies et r√©aliser mon plein potentiel.
`;

                    navigator.clipboard.writeText(aiPrompt.trim()).then(() => {
                        const originalText = aiExportBtn.innerHTML;
                        aiExportBtn.innerHTML = '‚úÖ Copi√© !';
                        aiExportBtn.disabled = true;
                        setTimeout(() => {
                            aiExportBtn.innerHTML = originalText;
                            aiExportBtn.disabled = false;
                        }, 2500);
                    }).catch(err => {
                        console.error("Erreur lors de la copie : ", err);
                        alert("La copie dans le presse-papiers a √©chou√©.");
                    });
                };
            }
        });
    </script>
</body>
</html>

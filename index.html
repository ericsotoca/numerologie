<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Num√©rologie Strat√©gique - Grand Ma√Ætre</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #3a0ca3; --secondary-color: #7209b7; --background-color: #f5f3f4;
            --text-color: #212529; --card-bg: #ffffff; --border-radius: 12px;
            --box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08); --summary-border: #4361ee;
            --karmic-bg: #fffbe6; --karmic-border: #ffc107;
            --daily-vibration-bg: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            --harmony-color: #2a9d8f; --challenge-color: #e76f51; --neutral-color: #f4a261;
        }
        body.dark-mode {
            --primary-color: #9d4edd; --secondary-color: #c77dff; --background-color: #121212;
            --text-color: #e0e0e0; --card-bg: #1e1e1e;
            --box-shadow: 0 6px 20px rgba(255, 255, 255, 0.05); --summary-border: #80ffdb;
            --karmic-bg: #332b00; --karmic-border: #ffc107;
            --daily-vibration-bg: linear-gradient(135deg, #2d1a3c 0%, #2c3e50 100%);
            --harmony-color: #80ffdb; --challenge-color: #ff9b85; --neutral-color: #ffcb77;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        html { scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--background-color); color: var(--text-color); margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; transition: background-color 0.3s, color 0.3s; }
        .container { max-width: 800px; width: 100%; }
        header { text-align: center; margin-bottom: 20px; color: var(--primary-color); position: relative; }
        header h1 { font-family: 'Lora', serif; font-size: 2.5em; font-weight: 600; margin: 0; }
        nav.app-nav { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 15px;}
        nav.app-nav button { padding: 10px 20px; font-size: 1em; background: transparent; color: var(--text-color); border: 2px solid transparent; border-radius: var(--border-radius); font-weight: 600; cursor: pointer; }
        nav.app-nav button.active { color: var(--primary-color); border-bottom: 2px solid var(--primary-color); background-color: color-mix(in srgb, var(--primary-color) 10%, transparent); }
        .tab-content { display: none; } .tab-content.active { display: block; animation: fadeIn 0.5s; }
        main { background: var(--card-bg); padding: 30px 40px; border-radius: var(--border-radius); box-shadow: var(--box-shadow); transition: background-color 0.3s; }
        #welcome-back { padding: 15px; background-color: color-mix(in srgb, var(--summary-border) 20%, transparent); border: 1px solid var(--summary-border); color: var(--text-color); border-radius: var(--border-radius); margin-bottom: 20px; text-align: center; font-weight: 600; }
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--primary-color); }
        .input-group input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: var(--border-radius); font-size: 1em; font-family: 'Poppins', sans-serif; box-sizing: border-box; background-color: var(--card-bg); color: var(--text-color); transition: border-color 0.3s, box-shadow 0.3s; }
        button { width: 100%; padding: 15px; background: linear-gradient(45deg, var(--secondary-color), var(--primary-color)); color: white; border: none; border-radius: var(--border-radius); font-size: 1.2em; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        button:hover:not(:disabled) { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(58, 12, 163, 0.4); }
        button:disabled { background: #999; cursor: not-allowed; transform: translateY(0); box-shadow: none; }
        .card { opacity: 0; background-color: var(--card-bg); padding: 25px; margin-bottom: 25px; border-radius: var(--border-radius); border-left: 6px solid var(--secondary-color); box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .card.fade-in { animation: fadeIn 0.5s ease-out forwards; }
        h2 { margin-top: 0; margin-bottom: 15px; color: var(--primary-color); display: flex; align-items: center; font-family: 'Lora', serif; font-size: 1.8em; }
        .number-circle { flex-shrink: 0; display: inline-flex; justify-content: center; align-items: center; width: 50px; height: 50px; background-color: var(--secondary-color); color: white; border-radius: 50%; font-size: 1.6em; font-weight: 600; margin-right: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); cursor: pointer; transition: transform 0.2s; }
        .number-circle:hover { transform: scale(1.1); }
        .daily-vibration-card { border: none; background: var(--daily-vibration-bg); color: #fff; }
        .daily-vibration-card h2, .daily-vibration-card .description, body.dark-mode .daily-vibration-card p { color: #fff; }
        .karmic-warning { background-color: var(--karmic-bg); border: 1px solid var(--karmic-border); border-radius: var(--border-radius); padding: 15px; margin-top: 20px; color: color-mix(in srgb, var(--karmic-border) 80%, #000 20%);}
        .action-buttons { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 20px; }
        .action-buttons button { flex: 1 1 200px; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); animation: fadeIn 0.3s; }
        .modal-content { background-color: var(--card-bg); margin: 10% auto; padding: 30px; border-top: 5px solid var(--primary-color); width: 80%; max-width: 600px; border-radius: var(--border-radius); position: relative; }
        .close-button { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .hidden { display: none; }
        .theme-switch-wrapper { display: flex; align-items: center; position: absolute; top: 15px; right: 15px; }
        .theme-switch { position: relative; display: inline-block; width: 60px; height: 34px; }
        .theme-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary-color); }
        input:checked + .slider:before { transform: translateX(26px); }
        /* Compatibility */
        #compatibility-results .card { border-left-width: 6px; }
        #compatibility-results .card.harmony { border-left-color: var(--harmony-color); }
        #compatibility-results .card.challenge { border-left-color: var(--challenge-color); }
        #compatibility-results .card.neutral { border-left-color: var(--neutral-color); }
        /* Energy Chart */
        .energy-chart-svg-container { margin-top: 15px; }
        .energy-analysis { margin-top: 15px; padding: 15px; background-color: color-mix(in srgb, var(--primary-color) 5%, transparent); border-radius: var(--border-radius); }
        /* Life Cycles */
        .life-cycles-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .cycle-card { padding: 15px; border-radius: var(--border-radius); background-color: color-mix(in srgb, var(--primary-color) 5%, transparent); text-align: center; }
        .cycle-card h3 { font-family: 'Lora', serif; color: var(--primary-color); margin-top: 0; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîÆ Num√©rologie - Grand Ma√Ætre</h1>
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="theme-toggle"><input type="checkbox" id="theme-toggle" /><span class="slider round"></span></label>
            </div>
        </header>
        
        <nav class="app-nav">
            <button id="nav-theme" class="active">Mon Th√®me</button>
            <button id="nav-compatibility">Compatibilit√©</button>
        </nav>

        <main>
            <div id="theme-content" class="tab-content active">
                <div id="welcome-back" class="hidden"></div>
                <form id="numerology-form">
                    <div class="input-group"><label for="full-name">Vos Noms & Pr√©noms (naissance)</label><input type="text" id="full-name" required></div>
                    <div class="input-group"><label for="birth-date">Votre Date de naissance</label><input type="date" id="birth-date" required></div>
                    <button type="submit">Calculer mon Th√®me Complet</button>
                </form>
                <div id="results-wrapper" class="hidden">
                    <div id="daily-vibration-container"></div>
                    <div id="summary-container"></div>
                    <div id="results-container"></div>
                    <div id="energy-presence-container"></div>
                    <div id="life-cycles-container"></div>
                    <div id="profile-card-container" class="hidden"><h2>üñºÔ∏è Votre Carte de Profil</h2><p>Faites un clic droit sur l'image pour la sauvegarder.</p><canvas id="profile-card-canvas"></canvas></div>
                    <div class="action-buttons">
                        <button id="ai-export-btn">‚ú® Analyser avec une IA</button>
                        <button id="profile-card-btn">üñºÔ∏è Cr√©er ma Carte</button>
                        <button id="print-btn">üñ®Ô∏è Imprimer / PDF</button>
                    </div>
                </div>
            </div>

            <div id="compatibility-content" class="tab-content">
                <h2>Analyse de Compatibilit√©</h2>
                <p>Comparez votre th√®me avec celui d'une autre personne pour d√©couvrir vos dynamiques relationnelles.</p>
                <form id="compatibility-form">
                    <h4>Personne 1 (Vous)</h4>
                    <div class="input-group"><label for="p1-full-name">Noms & Pr√©noms</label><input type="text" id="p1-full-name" required></div>
                    <div class="input-group"><label for="p1-birth-date">Date de naissance</label><input type="date" id="p1-birth-date" required></div>
                    <hr>
                    <h4>Personne 2</h4>
                    <div class="input-group"><label for="p2-full-name">Noms & Pr√©noms</label><input type="text" id="p2-full-name" required></div>
                    <div class="input-group"><label for="p2-birth-date">Date de naissance</label><input type="date" id="p2-birth-date" required></div>
                    <button type="submit">Analyser la Compatibilit√©</button>
                </form>
                <div id="compatibility-results" class="hidden"></div>
            </div>
        </main>
        <footer style="text-align:center; font-size: 0.9em; opacity: 0.7; padding: 20px 0;"><p>Application cr√©√©e pour la d√©couverte de soi. Ne remplace pas un conseil professionnel.</p></footer>
    </div>
    <div id="glossary-modal" class="modal"><div class="modal-content"><span id="modal-close-btn" class="close-button">√ó</span><div id="modal-body"></div></div></div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const data = {
                letterValues: { 'A':1,'J':1,'S':1, 'B':2,'K':2,'T':2, 'C':3,'L':3,'U':3, 'D':4,'M':4,'V':4, 'E':5,'N':5,'W':5, 'F':6,'O':6,'X':6, 'G':7,'P':7,'Y':7, 'H':8,'Q':8,'Z':8, 'I':9,'R':9 },
                vowels: ['A', 'E', 'I', 'O', 'U', 'Y'],
                karmicDebtsMap: { 13: "la paresse et le travail", 14: "les abus des sens et l'instabilit√©", 16: "l'orgueil et la destruction de l'ego", 19: "l'√©go√Øsme et l'abus de pouvoir" },
                energyKeywords: { 1: "Leader", 2: "Diplomate", 3: "Cr√©atif", 4: "B√¢tisseur", 5: "Aventurier", 6: "Responsable", 7: "Sage", 8: "Puissant", 9: "Humaniste", 11: "Inspir√©", 22: "Grand B√¢tisseur", 33: "Guide" },
                interpretations: {
                    cheminDeVie: { 1: "<strong>Le Leader :</strong> Votre mission est d'apprendre l'ind√©pendance et l'innovation. Le d√©fi est de croire en vos propres id√©es.", 2: "<strong>Le Diplomate :</strong> Votre chemin est celui de la coop√©ration et de l'harmonie. Le d√©fi est de trouver votre propre voix.", 3: "<strong>Le Communicant :</strong> Votre mission est d'inspirer par la cr√©ativit√©. Le d√©fi est de ne pas disperser votre √©nergie.", 4: "<strong>Le B√¢tisseur :</strong> Votre mission est de construire et d'apporter de la stabilit√©. Le d√©fi est d'accepter la flexibilit√©.", 5: "<strong>L'Aventurier :</strong> Votre chemin est celui du changement et de la libert√©. Le d√©fi est de trouver un √©quilibre entre libert√© et discipline.", 6: "<strong>Le Responsable :</strong> Votre mission est li√©e au service et √† la famille. Le d√©fi est de ne pas tomber dans le sacrifice.", 7: "<strong>Le Sage :</strong> Votre chemin est celui de la connaissance et de l'introspection. Le d√©fi est de ne pas vous isoler du monde.", 8: "<strong>Le Ma√Ætre :</strong> Votre mission est de ma√Ætriser le monde mat√©riel et le pouvoir. Le d√©fi est d'utiliser ce pouvoir avec sagesse et g√©n√©rosit√©.", 9: "<strong>L'Humaniste :</strong> Votre chemin est celui de l'altruisme et de la compassion. Le d√©fi est d'apprendre √† l√¢cher prise.", 11: "<strong>L'Inspir√© :</strong> Ma√Ætre nombre. Un chemin de grande intuition et de r√©v√©lation. Le d√©fi est de g√©rer une grande tension nerveuse et de vivre √† la hauteur de vos id√©aux.", 22: "<strong>Le Grand B√¢tisseur :</strong> Ma√Ætre nombre. La capacit√© de transformer les r√™ves les plus √©lev√©s en r√©alit√©. Le d√©fi est immense et demande un travail et une √©thique sans faille.", 33: "<strong>Le Guide Spirituel :</strong> Ma√Ætre nombre. Un chemin de service et de gu√©rison √† grande √©chelle. Le d√©fi est de g√©rer les responsabilit√©s sans s'oublier." },
                    expression: { 1: "<strong>Le Pionnier :</strong> Vos talents sont l'initiative et le leadership.", 2: "<strong>Le Partenaire :</strong> Vos dons sont la collaboration et la m√©diation.", 3: "<strong>L'Artiste Cr√©atif :</strong> Votre potentiel s'exprime par la communication et la cr√©ativit√©.", 4: "<strong>L'Organisateur :</strong> Vous avez un talent pour la planification et le travail m√©ticuleux.", 5: "<strong>Le Communicateur Charismatique :</strong> Vos talents sont la polyvalence et l'adaptabilit√©.", 6: "<strong>Le Conseiller Protecteur :</strong> Vous avez un don pour le conseil et la prise en charge.", 7: "<strong>Le Chercheur de V√©rit√© :</strong> Vos talents sont l'analyse et la recherche.", 8: "<strong>Le Manager Ambitieux :</strong> Vous poss√©dez un potentiel pour les affaires et la finance.", 9: "<strong>L'Id√©aliste :</strong> Vos dons sont la compassion et une vision large des choses.", 11: "<strong>Le Visionnaire :</strong> Vous avez le potentiel d'inspirer les autres par des id√©es novatrices.", 22: "<strong>Le Ma√Ætre d'Oeuvre :</strong> Vous pouvez g√©rer de grands projets qui servent l'humanit√©.", 33: "<strong>Le Grand Serviteur :</strong> Votre potentiel est dans l'enseignement et la gu√©rison." },
                    ame: { 1: "<strong>D√©sir d'Ind√©pendance :</strong> Vous aspirez √† diriger votre propre vie.", 2: "<strong>D√©sir d'Harmonie :</strong> Votre √¢me recherche l'amour, la paix et l'union.", 3: "<strong>D√©sir d'Expression :</strong> Vous avez un besoin vital de cr√©er et de communiquer.", 4: "<strong>D√©sir de Stabilit√© :</strong> Vous recherchez la s√©curit√© et un cadre solide.", 5: "<strong>D√©sir de Libert√© :</strong> Votre √¢me a soif de changement et d'aventure.", 6: "<strong>D√©sir de Service :</strong> Vous √™tes anim√© par le besoin de prendre soin des autres.", 7: "<strong>D√©sir de Connaissance :</strong> Vous avez un besoin de comprendre les myst√®res de la vie.", 8: "<strong>D√©sir de Ma√Ætrise :</strong> Vous aspirez au succ√®s et √† la ma√Ætrise du monde mat√©riel.", 9: "<strong>D√©sir d'Universalit√© :</strong> Votre √¢me est tourn√©e vers l'humanit√© et les grandes causes.", 11: "<strong>D√©sir de R√©v√©lation :</strong> Vous cherchez √† vous connecter √† une conscience sup√©rieure.", 22: "<strong>D√©sir de B√¢tir pour le Monde :</strong> Vous voulez laisser un h√©ritage durable.", 33: "<strong>D√©sir de Gu√©rir :</strong> Vous √™tes motiv√© par une compassion profonde et le d√©sir d'aider." },
                    personnalite: { 1: "<strong>L'Image du Chef :</strong> Vous apparaissez comme une personne confiante et ind√©pendante.", 2: "<strong>L'Image du Diplomate :</strong> Les autres vous voient comme quelqu'un de charmant et coop√©ratif.", 3: "<strong>L'Image de l'Artiste Sociable :</strong> On vous per√ßoit comme quelqu'un de p√©tillant et communicatif.", 4: "<strong>L'Image du Pilier Fiable :</strong> Vous projetez une image de s√©rieux, de stabilit√© et de fiabilit√©.", 5: "<strong>L'Image de l'Aventurier :</strong> On vous per√ßoit comme une personne magn√©tique et adaptable.", 6: "<strong>L'Image du Parent Universel :</strong> Les autres vous voient comme une personne chaleureuse et bienveillante.", 7: "<strong>L'Image du Sage Myst√©rieux :</strong> On vous per√ßoit comme quelqu'un d'intelligent et de r√©serv√©.", 8: "<strong>L'Image de la Puissance :</strong> Vous projetez une image de force, d'ambition et de contr√¥le.", 9: "<strong>L'Image de l'Humaniste :</strong> On vous per√ßoit comme une personne tol√©rante et g√©n√©reuse.", 11: "<strong>L'Image de l'Intuitif :</strong> Vous semblez connect√© √† une autre r√©alit√©.", 22: "<strong>L'Image du B√¢tisseur :</strong> On per√ßoit votre potentiel √† r√©aliser de grandes choses.", 33: "<strong>L'Image du Guide :</strong> Vous d√©gagez une aura de compassion et de sagesse." },
                    nombreActif: { 1: "<strong>Action Directe :</strong> Votre pr√©nom vous pousse √† agir de mani√®re directe et d√©cisive.", 2: "<strong>Action Collaborative :</strong> Vous agissez de pr√©f√©rence en collaboration.", 3: "<strong>Action Cr√©ative :</strong> Votre mani√®re d'agir est joyeuse et expressive.", 4: "<strong>Action M√©thodique :</strong> Vous agissez de fa√ßon planifi√©e et pers√©v√©rante.", 5: "<strong>Action Adaptable :</strong> Vous agissez de mani√®re rapide et flexible.", 6: "<strong>Action Responsable :</strong> Vos actions sont motiv√©es par le sens des responsabilit√©s.", 7: "<strong>Action R√©fl√©chie :</strong> Vous avez besoin d'analyser la situation avant de vous engager.", 8: "<strong>Action Ambitieuse :</strong> Votre mode d'action est puissant et orient√© vers un objectif.", 9: "<strong>Action Altruiste :</strong> Vous agissez souvent pour une cause plus grande que vous.", 11: "<strong>Action Inspir√©e :</strong> Vous agissez selon votre intuition.", 22: "<strong>Action Constructive :</strong> Vous √™tes pouss√© √† agir pour des projets concrets.", 33: "<strong>Action de Service :</strong> Vos actions visent √† guider les autres." }
                },
                dailyVibration: { 
                    1:"<strong>Initiative & Action :</strong> Journ√©e id√©ale pour d√©marrer de nouveaux projets et affirmer votre ind√©pendance. Prenez les devants !",
                    2:"<strong>Patience & Diplomatie :</strong> Ralentissez. C'est un jour pour √©couter, collaborer et faire preuve de tact. Favorisez les partenariats.",
                    3:"<strong>Cr√©ativit√© & Communication :</strong> Exprimez-vous ! Une excellente journ√©e pour socialiser, rire, cr√©er et partager vos id√©es avec optimisme.",
                    4:"<strong>Travail & Organisation :</strong> Concentrez-vous sur les d√©tails et le travail m√©thodique. Journ√©e parfaite pour ranger, planifier et construire des bases solides.",
                    5:"<strong>Changement & Aventure :</strong> Attendez-vous √† l'inattendu. Soyez flexible, ouvert aux nouvelles exp√©riences et pr√™t √† bouger. √âvitez la routine.",
                    6:"<strong>Harmonie & Responsabilit√©s :</strong> Le foyer et les relations sont au centre. Un jour pour prendre soin de vos proches, embellir votre environnement et assumer vos responsabilit√©s.",
                    7:"<strong>Introspection & R√©flexion :</strong> Prenez du temps pour vous. C'est un jour pour analyser, m√©diter, et chercher des r√©ponses √† l'int√©rieur. Ne forcez rien.",
                    8:"<strong>Ambition & Pouvoir :</strong> Concentrez-vous sur vos finances et votre carri√®re. Journ√©e propice aux d√©cisions importantes, aux n√©gociations et √† l'affirmation de votre autorit√©.",
                    9:"<strong>Bilan & Altruisme :</strong> C'est un jour pour finaliser, pardonner et l√¢cher-prise. Aidez les autres et terminez ce qui est en cours avant de commencer du neuf.",
                    // === DEBUT DE LA CORRECTION ===
                    11: "<strong>Intuition & R√©v√©lation :</strong> Une journ√©e de grande sensibilit√©. Fiez-vous √† votre intuition, elle est particuli√®rement forte. Les tensions sont possibles, cherchez l'harmonie comme pour un jour 2.",
                    22: "<strong>Construction & Vision :</strong> Potentiel de r√©aliser quelque chose de grand. C'est un jour 4 √† une √©chelle sup√©rieure. R√™vez grand, mais ancrez vos actions dans le concret.",
                    33: "<strong>Compassion & Gu√©rison :</strong> Journ√©e de service et d'amour universel. Une √©nergie de jour 6 amplifi√©e. Soyez une source d'inspiration et de r√©confort pour les autres."
                    // === FIN DE LA CORRECTION ===
                },
                compatibility: {
                    relations: {
                        '1': { harmony: [1, 3, 5], challenge: [6, 8], neutral: [2, 4, 7, 9] }, '2': { harmony: [2, 4, 6, 8], challenge: [5, 7], neutral: [1, 3, 9] },
                        '3': { harmony: [1, 3, 5, 6, 9], challenge: [], neutral: [2, 4, 7, 8] }, '4': { harmony: [2, 4, 6, 8], challenge: [5, 7], neutral: [1, 3, 9] },
                        '5': { harmony: [1, 3, 5], challenge: [2, 4], neutral: [6, 7, 8, 9] }, '6': { harmony: [2, 3, 4, 6, 9], challenge: [1, 8], neutral: [5, 7] },
                        '7': { harmony: [7, 9], challenge: [2, 4, 8], neutral: [1, 3, 5, 6] }, '8': { harmony: [2, 4, 6, 8], challenge: [1, 7], neutral: [3, 5, 9] },
                        '9': { harmony: [3, 6, 9], challenge: [], neutral: [1, 2, 4, 5, 7, 8] },
                    },
                    summary: {
                        harmony: "Dynamique tr√®s favorable, marqu√©e par une compr√©hension et un soutien mutuels. Les √©nergies s'alignent naturellement.",
                        challenge: "Relation de croissance. Les diff√©rences peuvent cr√©er des frictions, mais offrent de puissantes le√ßons si elles sont comprises.",
                        neutral: "Compatibilit√© √©quilibr√©e. La relation d√©pendra de la volont√© des deux partenaires de s'adapter et de communiquer."
                    }
                }
            };

            const calculator = {
                reduceNumber(n) {
                    let num = parseInt(n, 10);
                    if (isNaN(num)) return 0;
                    while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
                        num = String(num).split('').reduce((acc, digit) => acc + parseInt(digit, 10), 0);
                    }
                    return num;
                },
                calculateComplexNumber(sum) {
                    const karmicDebt = Object.keys(data.karmicDebtsMap).map(Number).includes(sum) ? sum : null;
                    const finalValue = this.reduceNumber(sum);
                    return { value: finalValue, karmicDebt, initialSum: sum };
                },
                calculateNameNumber(name, type) {
                    if (!name) return { value: 0, initialSum: 0, karmicDebt: null, details: "Aucun nom fourni" };
                    const normalizedName = name.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase().replace(/[^A-Z\s]/g, '');
                    let sum = 0;
                    let details = [];
                    for (const char of normalizedName) {
                        if (char === ' ') continue;
                        const isVowel = data.vowels.includes(char);
                        if ((type === 'all') || (type === 'vowels' && isVowel) || (type === 'consonants' && !isVowel)) {
                            const value = data.letterValues[char] || 0;
                            sum += value;
                            details.push(`${char}(${value})`);
                        }
                    }
                    if (details.length === 0) return { value: 0, initialSum: 0, karmicDebt: null, details: "Aucune lettre valide trouv√©e." };
                    const result = this.calculateComplexNumber(sum);
                    result.details = `${details.join(' + ')} = ${result.initialSum}${result.karmicDebt ? ` (Dette ${result.karmicDebt})` : ''} ‚ûî ${result.value}`;
                    return result;
                },
                calculateLifePath(date) {
                    const [year, month, day] = date.split('-');
                    const sum = this.reduceNumber(day) + this.reduceNumber(month) + this.reduceNumber(year);
                    const result = this.calculateComplexNumber(sum);
                    result.details = `Jour(${this.reduceNumber(day)}) + Mois(${this.reduceNumber(month)}) + Ann√©e(${this.reduceNumber(year)}) = ${result.initialSum} ‚ûî ${result.value}`;
                    return result;
                },
                calculateDailyVibration(birthDate) {
                    if (!birthDate) return 0;
                    const today = new Date();
                    const birth = new Date(birthDate);
                    const sum = this.reduceNumber(birth.getDate()) + this.reduceNumber(birth.getMonth() + 1) + this.reduceNumber(today.getDate()) + this.reduceNumber(today.getMonth() + 1) + this.reduceNumber(today.getFullYear());
                    return this.reduceNumber(sum);
                },
                calculateEnergyPresence(fullName) {
                    const presence = { 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0 };
                    const normalizedName = fullName.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase().replace(/[^A-Z]/g, '');
                    for (const char of normalizedName) {
                        if (data.letterValues[char]) {
                            presence[data.letterValues[char]]++;
                        }
                    }
                    return presence;
                },
                calculateLifeCycles(birthDate, lifePathValue) {
                    const [year, month, day] = birthDate.split('-').map(Number);
                    const dayR = this.reduceNumber(day), monthR = this.reduceNumber(month), yearR = this.reduceNumber(year);
                    const age1 = 36 - lifePathValue;
                    return [
                        { age: `0 √† ${age1} ans`, pinnacle: this.reduceNumber(monthR + dayR), challenge: this.reduceNumber(Math.abs(monthR - dayR)) },
                        { age: `${age1 + 1} √† ${age1 + 9} ans`, pinnacle: this.reduceNumber(dayR + yearR), challenge: this.reduceNumber(Math.abs(dayR - yearR)) },
                        { age: `${age1 + 10} √† ${age1 + 18} ans`, pinnacle: this.reduceNumber(this.reduceNumber(monthR + dayR) + this.reduceNumber(dayR + yearR)), challenge: this.reduceNumber(Math.abs(this.reduceNumber(Math.abs(monthR - dayR)) - this.reduceNumber(Math.abs(dayR - yearR)))) },
                        { age: `Apr√®s ${age1 + 18} ans`, pinnacle: this.reduceNumber(monthR + yearR), challenge: this.reduceNumber(Math.abs(monthR - yearR)) }
                    ];
                },
                getTheme(fullName, birthDate) {
                    const cleanedFullName = fullName.trim().replace(/\s+/g, ' ');
                    const firstName = cleanedFullName.split(' ')[0];
                    const lifePath = this.calculateLifePath(birthDate);
                    return {
                        fullName: cleanedFullName, firstName, birthDate, lifePath,
                        expression: this.calculateNameNumber(cleanedFullName, 'all'),
                        soul: this.calculateNameNumber(cleanedFullName, 'vowels'),
                        personality: this.calculateNameNumber(cleanedFullName, 'consonants'),
                        active: this.calculateNameNumber(firstName, 'all'),
                        dailyVibration: this.calculateDailyVibration(birthDate),
                        energyPresence: this.calculateEnergyPresence(cleanedFullName),
                        lifeCycles: this.calculateLifeCycles(birthDate, lifePath.value),
                    };
                }
            };

            const ui = {
                elements: { 
                    form: document.getElementById('numerology-form'), nameInput: document.getElementById('full-name'), dateInput: document.getElementById('birth-date'), 
                    resultsWrapper: document.getElementById('results-wrapper'), dailyVibrationContainer: document.getElementById('daily-vibration-container'),
                    summaryContainer: document.getElementById('summary-container'), energyContainer: document.getElementById('energy-presence-container'), 
                    cyclesContainer: document.getElementById('life-cycles-container'), resultsContainer: document.getElementById('results-container'),
                    profileCardContainer: document.getElementById('profile-card-container'), profileCardCanvas: document.getElementById('profile-card-canvas'),
                    printBtn: document.getElementById('print-btn'), aiExportBtn: document.getElementById('ai-export-btn'), profileCardBtn: document.getElementById('profile-card-btn'), 
                    themeToggle: document.getElementById('theme-toggle'), welcomeBack: document.getElementById('welcome-back'),
                    navTheme: document.getElementById('nav-theme'), navCompatibility: document.getElementById('nav-compatibility'),
                    themeContent: document.getElementById('theme-content'), compatibilityContent: document.getElementById('compatibility-content'),
                    compatForm: document.getElementById('compatibility-form'), p1Name: document.getElementById('p1-full-name'), p1Date: document.getElementById('p1-birth-date'),
                    p2Name: document.getElementById('p2-full-name'), p2Date: document.getElementById('p2-birth-date'), compatResultsContainer: document.getElementById('compatibility-results'),
                    glossaryModal: document.getElementById('glossary-modal'), modalCloseBtn: document.getElementById('modal-close-btn'), modalBody: document.getElementById('modal-body'),
                },

                init() {
                    this.elements.themeToggle.addEventListener('change', () => { 
                        document.body.classList.toggle('dark-mode'); 
                        localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light'); 
                    });
                    if (localStorage.getItem('theme') === 'dark') { document.body.classList.add('dark-mode'); this.elements.themeToggle.checked = true; }
                    
                    this.elements.navTheme.addEventListener('click', () => this.toggleView('theme'));
                    this.elements.navCompatibility.addEventListener('click', () => this.toggleView('compatibility'));
                    
                    this.elements.form.addEventListener('submit', e => { e.preventDefault(); this.handleThemeSubmit(); });
                    this.elements.compatForm.addEventListener('submit', e => { e.preventDefault(); this.handleCompatibilitySubmit(e); });
                    
                    const savedUser = JSON.parse(localStorage.getItem('numerologyUser'));
                    if (savedUser && savedUser.name && savedUser.date) {
                        this.elements.nameInput.value = savedUser.name;
                        this.elements.dateInput.value = savedUser.date;
                        this.elements.p1Name.value = savedUser.name;
                        this.elements.p1Date.value = savedUser.date;
                        this.elements.welcomeBack.innerHTML = `Heureux de vous revoir, ${savedUser.name.split(' ')[0]} !`;
                        this.elements.welcomeBack.classList.remove('hidden');
                        this.displayThemeResults(savedUser.name, savedUser.date, true);
                    }

                    this.elements.modalCloseBtn.onclick = () => this.elements.glossaryModal.style.display = "none";
                    window.onclick = (event) => { if (event.target == this.elements.glossaryModal) this.elements.glossaryModal.style.display = "none"; };
                },

                toggleView(view) {
                    const isTheme = view === 'theme';
                    this.elements.themeContent.classList.toggle('active', isTheme);
                    this.elements.compatibilityContent.classList.toggle('active', !isTheme);
                    this.elements.navTheme.classList.toggle('active', isTheme);
                    this.elements.navCompatibility.classList.toggle('active', !isTheme);
                },

                handleThemeSubmit() {
                    const fullName = this.elements.nameInput.value;
                    const birthDate = this.elements.dateInput.value;
                    if (!fullName || !birthDate) { alert("Veuillez remplir tous les champs."); return; }
                    localStorage.setItem('numerologyUser', JSON.stringify({ name: fullName, date: birthDate }));
                    this.displayThemeResults(fullName, birthDate, false);
                    this.elements.p1Name.value = fullName;
                    this.elements.p1Date.value = birthDate;
                },
                
                handleCompatibilitySubmit(e){
                    const p1Name = this.elements.p1Name.value, p1Date = this.elements.p1Date.value;
                    const p2Name = this.elements.p2Name.value, p2Date = this.elements.p2Date.value;
                    if(!p1Name || !p1Date || !p2Name || !p2Date) { alert("Veuillez remplir les informations des deux personnes."); return; }
                    
                    const p1Theme = calculator.getTheme(p1Name, p1Date);
                    const p2Theme = calculator.getTheme(p2Name, p2Date);
                    
                    this.displayCompatibilityResults(p1Theme, p2Theme);
                    e.target.querySelector('button').scrollIntoView({ behavior: 'smooth', block: 'end' });
                },

                displayThemeResults(fullName, birthDate, isReload) {
                    const theme = calculator.getTheme(fullName, birthDate);
                    const mainResults = new Map([
                        ['Chemin de Vie', { key: 'cheminDeVie', result: theme.lifePath, description: "Votre mission de vie, les le√ßons √† apprendre." }],
                        ['Nombre d\'Expression', { key: 'expression', result: theme.expression, description: "Vos talents inn√©s, vos potentiels." }],
                        ['Nombre de l\'√Çme', { key: 'ame', result: theme.soul, description: "Ce qui vous motive profond√©ment." }],
                        ['Nombre de Personnalit√©', { key: 'personnalite', result: theme.personality, description: "L'image que vous projetez, votre 'masque' social." }],
                        ['Nombre Actif', { key: 'nombreActif', result: theme.active, description: "Votre √©nergie d'action, la fa√ßon dont vous initiez les choses." }]
                    ]);
                    
                    this.displayDailyVibration(theme.dailyVibration);
                    this.displaySummary(theme.lifePath.value, theme.expression.value);
                    this.displayEnergyChart(theme.energyPresence);
                    this.displayLifeCycles(theme.lifeCycles);

                    this.elements.resultsContainer.innerHTML = '';
                    mainResults.forEach((resultData, title) => {
                        this.elements.resultsContainer.appendChild(this.createResultCard(title, resultData));
                    });
                    
                    this.elements.resultsWrapper.classList.remove('hidden');
                    this.animateCards('#theme-content .card');
                    if (!isReload) {
                        setTimeout(() => this.elements.resultsWrapper.scrollIntoView({ behavior: 'smooth', block: 'start' }), 200);
                    }
                    this.setupActionButtons(theme, mainResults);
                },
                
                createResultCard(title, resultData) {
                    const interpretationText = data.interpretations[resultData.key]?.[resultData.result.value] || "Interpr√©tation non disponible.";
                    const card = document.createElement('div');
                    card.className = 'card result-card';
                    let karmicHTML = '';
                    if(resultData.result.karmicDebt) { karmicHTML = `<div class="karmic-warning">‚ö†Ô∏è <strong>D√©fi Karmique ${resultData.result.karmicDebt} :</strong> Ce nombre indique un d√©fi particulier li√© √† ${data.karmicDebtsMap[resultData.result.karmicDebt]}.</div>`; }
                    card.innerHTML = `<h2><span class="number-circle" data-number="${resultData.result.value}">${resultData.result.value}</span>${title}</h2><p class="description">${resultData.description}</p><p>${interpretationText}</p>${karmicHTML}<details><summary>Voir le calcul</summary><div class="calculation-details" style="font-size:0.9em; opacity:0.8; padding-top:10px;">${resultData.result.details}</div></details>`;
                    card.querySelector('.number-circle').addEventListener('click', (e) => this.openGlossaryModal(e.target.dataset.number));
                    return card;
                },

                displayDailyVibration(number) {
                    this.elements.dailyVibrationContainer.innerHTML = `<div class="card daily-vibration-card"><h2 class="fade-in"><span class="number-circle" data-number="${number}">${number}</span>Votre Vibration du Jour</h2><p class="description fade-in">${data.dailyVibration[number] || "Journ√©e d'√©nergie intense et de potentiel √©lev√©."}</p></div>`;
                    this.elements.dailyVibrationContainer.querySelector('.number-circle').addEventListener('click', (e) => this.openGlossaryModal(e.target.dataset.number));
                },
                
                displaySummary(lp, exp) {
                    const lpText = data.interpretations.cheminDeVie[lp]?.match(/<strong>(.*?) :<\/strong>/)[1] || "inconnu";
                    const expText = data.interpretations.expression[exp]?.match(/<strong>(.*?) :<\/strong>/)[1] || "inconnu";
                    let summaryText = `Votre <strong>Chemin de Vie ${lp}</strong> (votre mission) vous invite √† devenir <strong>${lpText}</strong>. Pour y parvenir, vous disposez des dons de votre <strong>Nombre d'Expression ${exp}</strong> (vos outils), qui vous d√©finit comme <strong>${expText}</strong>.`;
                    if (lp === exp || (lp === 11 && exp === 2) || (lp === 22 && exp === 4) || (lp === 33 && exp === 6)) { summaryText += "<br><br>‚ú® <strong>Synergie Puissante :</strong> Votre mission et vos talents sont en parfaite harmonie, ce qui vous donne une grande force et une clart√© d'objectif."; } 
                    else { summaryText += "<br><br>üí° <strong>Dynamique de Croissance :</strong> Vos talents et votre mission sont diff√©rents, cr√©ant une dynamique unique qui vous pousse √† d√©velopper de nouvelles facettes de votre personnalit√©."; }
                    this.elements.summaryContainer.innerHTML = `<div class="card summary-card" style="border-left-color: var(--summary-border);"><h2>Synth√®se Strat√©gique</h2><p>${summaryText}</p></div>`;
                },

                displayEnergyChart(presenceData) {
                    const analysis = this.generateEnergyAnalysis(presenceData);
                    const container = this.elements.energyContainer;
                    const chartWidth = 400;
                    const chartHeight = 170;
                    const barWidth = 30;
                    const barMargin = 15;
                    let maxPresence = Math.max(...Object.values(presenceData));
                    if (maxPresence === 0) maxPresence = 1;

                    let svgContent = `<svg width="100%" viewBox="0 0 ${chartWidth} ${chartHeight}" preserveAspectRatio="xMidYMid meet">`;

                    Object.entries(presenceData).forEach(([num, count], index) => {
                        const barHeight = (count / maxPresence) * (chartHeight - 30); // Keep space for label
                        const x = index * (barWidth + barMargin);
                        const y = chartHeight - barHeight - 20; // Y starts from top

                        svgContent += `
                            <g transform="translate(${x}, 0)">
                                <rect x="0" y="${y}" width="${barWidth}" height="${barHeight}" fill="var(--secondary-color)" rx="3">
                                    <title>${data.energyKeywords[num]} (x${count})</title>
                                </rect>
                                <text x="${barWidth / 2}" y="${chartHeight - 5}" font-family="Poppins" font-size="12" fill="var(--text-color)" text-anchor="middle">${num}</text>
                            </g>`;
                    });

                    svgContent += `</svg>`;
                    container.innerHTML = `<div class="card chart-card"><h2 style="font-size: 1.5em;">üìä Pr√©sence √ânerg√©tique du Nom</h2><p class="description">Ce graphique montre les √©nergies inn√©es dans votre nom. Une barre haute indique un talent naturel, une barre basse une √©nergie √† d√©velopper consciemment.</p><div class="energy-chart-svg-container">${svgContent}</div>${analysis}</div>`;
                },

                generateEnergyAnalysis(presenceData) {
                    const maxCount = Math.max(...Object.values(presenceData));
                    if (maxCount === 0) return "";
                    const maxEnergies = Object.keys(presenceData).filter(k => presenceData[k] === maxCount).map(Number);
                    const lackingEnergies = Object.keys(presenceData).filter(k => presenceData[k] === 0).map(Number);
                    let analysisHTML = '<div class="energy-analysis"><p><strong>Analyse de vos √©nergies :</strong> ';
                    analysisHTML += `Vos √©nergies dominantes sont le <strong>${maxEnergies.map(n => `${n} (${data.energyKeywords[n]})`).join(' et le ')}</strong>. Cela indique des talents naturels tr√®s marqu√©s dans ces domaines. `;
                    if (lackingEnergies.length > 0) {
                        analysisHTML += `√Ä l'inverse, les √©nergies <strong>${lackingEnergies.map(n => `${n} (${data.energyKeywords[n]})`).join(', ')}</strong> sont absentes. Ce sont des domaines que vous pourriez avoir besoin de d√©velopper pour atteindre un meilleur √©quilibre.`;
                    }
                    analysisHTML += '</p></div>';
                    return analysisHTML;
                },

                displayLifeCycles(cyclesData) {
                    let cyclesHTML = `<div class="card cycles-card"><h2 style="font-size: 1.5em;">üß≠ Vos 4 Cycles de Vie</h2><div class="life-cycles-grid">`;
                    cyclesData.forEach(cycle => { cyclesHTML += `<div class="cycle-card"><h3>${cycle.age}</h3><p><strong>Pinacle ${cycle.pinnacle}:</strong> Opportunit√©s et ambiance.</p><p><strong>D√©fi ${cycle.challenge}:</strong> Le√ßon √† int√©grer.</p></div>`; });
                    cyclesHTML += `</div></div>`;
                    this.elements.cyclesContainer.innerHTML = cyclesHTML;
                },
                
                getCompatibility(n1, n2) {
                    const masterNumbers = [11, 22, 33];
                    let r1 = masterNumbers.includes(n1) ? calculator.reduceNumber(n1) : n1;
                    let r2 = masterNumbers.includes(n2) ? calculator.reduceNumber(n2) : n2;
                    const rel = data.compatibility.relations[r1];
                    if (!rel) return 'neutral';
                    if (rel.harmony.includes(r2)) return 'harmony';
                    if (rel.challenge.includes(r2)) return 'challenge';
                    return 'neutral';
                },

                displayCompatibilityResults(p1, p2) {
                    const container = this.elements.compatResultsContainer;
                    container.innerHTML = '';
                    const aspects = [
                        { title: 'Chemins de Vie', val1: p1.lifePath.value, val2: p2.lifePath.value, desc: "La mission de vie, la le√ßon principale." },
                        { title: 'Nombres d\'Expression', val1: p1.expression.value, val2: p2.expression.value, desc: "Les talents, le mode de fonctionnement." },
                        { title: 'Nombres d\'√Çme', val1: p1.soul.value, val2: p2.soul.value, desc: "Les d√©sirs profonds, les motivations intimes." }
                    ];
                    aspects.forEach(aspect => {
                        const type = this.getCompatibility(aspect.val1, aspect.val2);
                        const typeText = { harmony: 'Harmonie', challenge: 'D√©fi', neutral: 'Neutre' }[type];
                        const card = document.createElement('div');
                        card.className = `card ${type}`;
                        card.innerHTML = `
                            <h2 style="color: var(--${type}-color);">${typeText} - ${aspect.title}</h2>
                            <p><strong>${p1.firstName} (${aspect.val1}) & ${p2.firstName} (${aspect.val2})</strong></p>
                            <p><em>${aspect.desc}</em></p>
                            <p>${data.compatibility.summary[type]}</p>
                        `;
                        container.appendChild(card);
                    });
                    container.classList.remove('hidden');
                    this.animateCards('#compatibility-results .card');
                },
                
                openGlossaryModal(number) {
                    let html = `<h2>L'√ânergie du Nombre ${number}</h2>`;
                    html += `<p><strong>Mot-cl√© :</strong> ${data.energyKeywords[number]}</p><hr>`;
                    Object.keys(data.interpretations).forEach(key => {
                        if (data.interpretations[key][number]) {
                            const title = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                            html += `<h3>En ${title} :</h3><p>${data.interpretations[key][number].split('. ')[0].replace(/<strong>.*?<\/strong> /,'')}</p>`;
                        }
                    });
                    this.elements.modalBody.innerHTML = html;
                    this.elements.glossaryModal.style.display = "block";
                },

                drawProfileCard(theme) {
                    this.elements.profileCardContainer.classList.remove('hidden');
                    const canvas = this.elements.profileCardCanvas;
                    const ctx = canvas.getContext('2d');
                    const isDark = document.body.classList.contains('dark-mode');
                    canvas.width = 500; canvas.height = 500;
                    const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                    gradient.addColorStop(0, isDark ? '#2c3e50' : '#4361ee');
                    gradient.addColorStop(1, isDark ? '#1e1e1e' : '#7209b7');
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 32px Lora';
                    ctx.textAlign = 'center';
                    ctx.fillText(theme.firstName, canvas.width / 2, 80);
                    const numbers = [
                        { label: "Chemin de Vie", value: theme.lifePath.value },
                        { label: "Expression", value: theme.expression.value },
                        { label: "√Çme", value: theme.soul.value },
                        { label: "Personnalit√©", value: theme.personality.value }
                    ];
                    ctx.font = '22px Poppins';
                    numbers.forEach((num, index) => {
                        const y = 160 + index * 80;
                        ctx.textAlign = 'left';
                        ctx.fillText(`${num.label} :`, 100, y);
                        ctx.textAlign = 'right';
                        ctx.font = 'bold 42px Lora';
                        ctx.fillText(num.value, 400, y + 10);
                        ctx.font = '22px Poppins';
                    });
                    this.elements.profileCardContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                },

                animateCards(selector) {
                    document.querySelectorAll(selector).forEach((card, index) => {
                        card.classList.remove('fade-in');
                        void card.offsetWidth;
                        card.style.animationDelay = `${index * 0.07}s`;
                        card.classList.add('fade-in');
                    });
                },

                setupActionButtons(theme, resultsMap) {
                    this.elements.printBtn.onclick = () => window.print();
                    this.elements.profileCardBtn.onclick = () => this.drawProfileCard(theme);
                    this.elements.aiExportBtn.onclick = () => {
                        let resultsForAI = '';
                        resultsMap.forEach((data, title) => { resultsForAI += `${title}: ${data.result.value}${data.result.karmicDebt ? ` (Dette Karmique ${data.result.karmicDebt})` : ''}\n`; });
                        const aiPrompt = `# CONTEXTE\nAgis comme un expert en num√©rologie strat√©gique. Analyse le th√®me suivant.\n\n# TH√àME NUM√âROLOGIQUE\n${resultsForAI.trim()}\n\n# CYCLES DE VIE\n${JSON.stringify(theme.lifeCycles, null, 2)}\n\n# √âNERGIES DU NOM (Pr√©sence des nombres de 1 √† 9)\n${JSON.stringify(theme.energyPresence, null, 2)}\n\n# TA MISSION\nEn te basant sur TOUTES ces donn√©es, r√©dige une analyse compl√®te et bienveillante. Ta valeur est de TISSER DES LIENS entre les nombres pour r√©v√©ler les synergies et les d√©fis.\n\nStructure ta r√©ponse ainsi :\n1. **Synth√®se Strat√©gique :** Le grand paradoxe ou la mission unique de cette personne. Comment son Expression (outils) sert son Chemin de Vie (mission) ?\n2. **Forces Principales (Synergies) :** Identifie 2-3 associations de nombres qui fonctionnent bien ensemble (ex: √Çme et Personnalit√©). Explique pourquoi.\n3. **Axes de Croissance (D√©fis) :** Analyse les tensions (ex: Expression vs Chemin de Vie), les dettes karmiques et les √©nergies manquantes du nom. Donne un conseil pour chaque point.\n4. **Feuille de Route Actuelle :** En te basant sur le cycle de vie actuel, quel est le principal conseil pour la p√©riode que la personne traverse ? (Consid√©rer que nous sommes en ${new Date().getFullYear()}).\n5. **Conseil Final :** Un r√©sum√© positif et un conseil actionnable pour que la personne puisse exploiter son plein potentiel.`;
                        navigator.clipboard.writeText(aiPrompt.trim()).then(() => { 
                            const originalText = this.elements.aiExportBtn.innerHTML; 
                            this.elements.aiExportBtn.innerHTML = '‚úÖ Copi√© !'; 
                            this.elements.aiExportBtn.disabled = true; 
                            setTimeout(() => { this.elements.aiExportBtn.innerHTML = originalText; this.elements.aiExportBtn.disabled = false; }, 2500); 
                        });
                    };
                }
            };

            ui.init();
        });
    </script>
</body>
</html>
